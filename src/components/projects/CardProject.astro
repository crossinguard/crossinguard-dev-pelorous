---
import { Icon } from "astro-icon/components";
interface Props {
    title: string;
    description: string;
    pubDate: Date;
    status: string;
    id: string;
    basePath: string; // e.g., "assessment", "web-dev", etc.
    tags?: string[];
}

const { title, description, pubDate, status, id, basePath, tags } = Astro.props;
---

<article class="box">
    <div class="date-status repel">
        <p class="date">
            {
                pubDate.toLocaleDateString("en-US", {
                    year: "numeric",
                    month: "short",
                    day: "numeric",
                })
            }
        </p>
        <p class="status">{status}</p>
    </div>
    <h2 class="title">
        <a href={`/projects/${basePath}/${id}`} class="link"
            >{title} <Icon name="ph:arrow-right" /></a
        >
    </h2>
    <p class="description">
        {description}
    </p>
    {
        tags && tags.length > 0 && (
            <ul class="tags cluster">
                {tags.map((tag) => (
                    <li class="tag">#{tag}</li>
                ))}
            </ul>
        )
    }
</article>

<style>
    .box {
        --box-border-width: 1px;
        --box-bg: var(--color-light-shade);
        --box-padding: var(--space-s);
        width: 100%;
        filter: drop-shadow(
            var(--space-3xs) var(--space-3xs) var(--color-dark)
        );
        transition: filter 0.2s ease-in;
    }

    .box:hover {
        filter: drop-shadow(var(--space-2xs) var(--space-2xs));
    }

    .box:has(.link:hover) {
        filter: drop-shadow(
            var(--space-2xs) var(--space-2xs) var(--color-primary-shade)
        );
    }

    .date {
        font-size: var(--step--1);
    }

    .status {
        font-size: var(--step--1);
        opacity: 0.8;
    }

    .title {
        font-size: var(--step-2);
    }

    .link {
        text-decoration: none;
        transition: color 0.2s ease-in;
    }

    .link:hover {
        color: var(--color-primary-shade);

        [data-icon] {
            color: inherit;
        }
    }

    .tags {
        --gutter: var(--space-xs);
        list-style: none;
        padding: 0;
        margin-block: 0;
    }

    .tag {
        font-family: var(--font-family-mono);
        font-size: var(--step--3);
    }

    [data-icon] {
        color: transparent;
        vertical-align: -0.15em;
        transition: color 0.2s ease-in;
    }
</style>
